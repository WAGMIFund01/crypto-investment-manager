<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Investment Manager</title>
    <!-- Add a simple data URI favicon to prevent 404 errors -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>💰</text></svg>">
    <!-- <link rel="stylesheet" href="styles.css"> --> <!-- All styles are now inline -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        /* Modern Fintech × Crypto-Native Design System */
        

        
        :root {
            /* Dark Mode Foundation */
            --bg-primary: #0a0b0d;
            --bg-secondary: #111318;
            --bg-tertiary: #1a1d24;
            --bg-card: #1e2128;
            --bg-elevated: #252830;
            
            /* Fluorescent Accents */
            --accent-orange: #ff6b35;
            --accent-green: #00d4aa;
            --accent-purple: #8b5cf6;
            --accent-blue: #3b82f6;
            
            /* Text Colors */
            --text-primary: #e2e8f0; /* High contrast white-gray for excellent readability */
            --text-secondary: #94a3b8; /* Improved secondary text contrast */
            --text-muted: #64748b; /* Better muted text contrast */
            --text-highlight: #ffffff; /* Pure white for emphasis */
            --text-success: #00d4aa;
            --text-danger: #ff4757;
            
            /* Borders & Dividers */
            --border-primary: #2d3139;
            --border-secondary: #3d4148;
            --border-accent: #ff6b35;
            
            /* Shadows */
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 20px rgba(255, 107, 53, 0.3);
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, var(--accent-orange) 0%, var(--accent-green) 100%);
            --gradient-card: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-elevated) 100%);
            --gradient-success: linear-gradient(135deg, var(--accent-green) 0%, #00b894 100%);
        }

        /* Base Overrides */
        * {
            box-sizing: border-box;
        }

        body {
            background: var(--bg-primary) !important;
            color: var(--text-primary) !important;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif !important;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* App Layout */
        .app {
            background: var(--bg-primary);
            min-height: 100vh;
        }

        /* Manager View */
        .manager-view {
            background: var(--bg-primary) !important;
            color: var(--text-primary) !important;
        }

        .manager-header {
            background: var(--bg-secondary) !important;
            border-bottom: 1px solid var(--border-primary) !important;
            padding: 1rem 2rem !important;
        }

        .manager-header h1 {
            color: var(--text-primary) !important;
            font-size: 1.5rem !important;
            font-weight: 700 !important;
            margin: 0 !important;
        }

        .manager-header .header-stats {
            gap: 2rem !important;
        }

        .manager-header .stat-item {
            color: var(--text-secondary) !important;
        }

        .manager-header .stat-value {
            color: var(--text-primary) !important;
            font-weight: 600 !important;
        }

        /* Navigation */

        /* Cards */
        .card {
            background: var(--gradient-card) !important;
            border: 1px solid var(--border-primary) !important;
            border-radius: 20px !important;
            padding: 2rem !important;
            margin-bottom: 2rem !important;
            box-shadow: var(--shadow-md) !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            position: relative !important;
            overflow: hidden !important;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            border-color: var(--border-accent) !important;
            transform: translateY(-4px) !important;
            box-shadow: var(--shadow-lg) !important;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card h2, .card h3 {
            color: var(--text-primary) !important;
            margin-top: 0 !important;
            margin-bottom: 2rem !important;
            font-weight: 700 !important;
            font-size: 1.5rem !important;
            letter-spacing: -0.025em !important;
        }

        .card h3 {
            font-size: 1.25rem !important;
            margin-bottom: 1.5rem !important;
        }

        /* Summary Dashboard */
        .summary-dashboard {
            background: var(--gradient-card) !important;
            border: 1px solid var(--border-accent) !important;
            border-radius: 24px !important;
            box-shadow: var(--shadow-glow) !important;
            position: relative !important;
            overflow: hidden !important;
        }

        .summary-dashboard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        .summary-metric {
            background: var(--bg-elevated) !important;
            border: 1px solid var(--border-primary) !important;
            border-radius: 16px !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            position: relative !important;
            overflow: hidden !important;
        }

        .summary-metric::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .summary-metric .metric-value {
            color: var(--text-highlight) !important; /* Pure white for numbers */
            font-weight: 700 !important; /* Bold numbers */
            font-size: 2rem !important;
        }

        .summary-metric .metric-label {
            color: var(--text-secondary) !important; /* Light gray for labels */
            font-weight: 500 !important; /* Slightly bolder labels */
            text-transform: uppercase !important;
            letter-spacing: 0.05em !important;
            font-size: 0.875rem !important;
        }

        /* Clickable Metrics */
        .clickable-metric:hover {
            transform: translateY(-6px) !important;
            box-shadow: var(--shadow-lg) !important;
            border-color: var(--accent-orange) !important;
            background: linear-gradient(135deg, var(--bg-elevated) 0%, var(--bg-card) 100%) !important;
        }

        .clickable-metric:hover::before {
            opacity: 1;
        }

        .clickable-metric:hover .metric-value {
            color: var(--text-highlight) !important;
        }

        .clickable-metric .metric-label::after {
            content: " 👆";
            opacity: 0;
            transition: opacity 0.2s;
        }

        .clickable-metric:hover .metric-label::after {
            opacity: 1;
        }

        /* Buttons */
        .btn {
            font-family: inherit !important;
            font-weight: 600 !important;
            border-radius: 12px !important;
            padding: 0.875rem 1.75rem !important;
            border: none !important;
            cursor: pointer !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            text-decoration: none !important;
            display: inline-flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
            position: relative !important;
            overflow: hidden !important;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }
        
        /* Small button variant for compact UI elements */
        .btn-sm {
            padding: 0.375rem 0.75rem !important;
            font-size: 0.75rem !important;
            border-radius: 8px !important;
            min-height: auto !important;
        }

        .btn-primary {
            background: var(--gradient-primary) !important;
            color: var(--text-highlight) !important;
            box-shadow: var(--shadow-sm) !important;
        }

        .btn-primary:hover {
            transform: translateY(-3px) !important;
            box-shadow: var(--shadow-md) !important;
        }

        .btn-secondary {
            background: var(--bg-elevated) !important;
            color: var(--text-primary) !important;
            border: 1px solid var(--border-secondary) !important;
        }

        .btn-secondary:hover {
            background: var(--bg-tertiary) !important;
            border-color: var(--accent-orange) !important;
            transform: translateY(-3px) !important;
        }

        /* Landing page specific styles */
        .login-screen h1 {
            font-size: clamp(2.5rem, 8vw, 4rem) !important;
        }

        .login-screen .btn:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3) !important;
        }

        .btn-secondary[style*="accent-green"]:hover {
            background: var(--accent-green) !important;
            color: var(--bg-primary) !important;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .login-screen .login-container {
                padding: 2rem 1rem !important;
            }
            
            .login-screen h1 {
                font-size: 2.5rem !important;
            }
            
            .login-screen .btn {
                min-width: 100% !important;
                margin-bottom: 1rem !important;
            }
            
            .login-screen > div[style*="flex"] {
                flex-direction: column !important;
                gap: 1rem !important;
            }
        }

        /* Tables */
        .data-table {
            width: 100% !important;
            border-collapse: collapse !important;
            background: transparent !important;
        }

        .data-table th {
            background: var(--bg-secondary) !important;
            color: var(--text-secondary) !important;
            font-weight: 600 !important;
            padding: 1rem !important;
            text-align: left !important;
            border-bottom: 1px solid var(--border-primary) !important;
            font-size: 0.875rem !important;
            text-transform: uppercase !important;
            letter-spacing: 0.05em !important;
        }

        .data-table td {
            padding: 1rem !important;
            border-bottom: 1px solid var(--border-primary) !important;
            color: var(--text-primary) !important; /* Now uses the updated medium gray color */
            font-weight: 500 !important; /* Slightly bolder for better readability */
        }

        .data-table th {
            color: var(--text-secondary) !important; /* Light gray for headers */
            font-weight: 600 !important;
            padding: 1rem !important;
        }

        .data-table tr:hover td {
            color: var(--text-highlight) !important; /* Pure white on hover */
            background: var(--bg-elevated) !important; /* Subtle background highlight */
        }

        .data-table tr:hover {
            background: var(--bg-secondary) !important;
        }

        .data-table tr[style*="cursor: pointer"]:hover {
            background: var(--bg-tertiary) !important;
            transform: scale(1.01) !important;
            transition: all 0.2s ease !important;
        }

        /* Positive/Negative Values */
        .positive {
            color: var(--text-success) !important;
            font-weight: 600 !important;
        }

        .negative {
            color: var(--text-danger) !important;
            font-weight: 600 !important;
        }

        /* Modals - Hidden by default, shown when active */
        .modal {
            display: none !important;
            position: fixed !important;
            z-index: 1000 !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: rgba(0, 0, 0, 0.8) !important;
            backdrop-filter: blur(8px) !important;
        }
        
        .modal.active {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .modal-content {
            background: var(--gradient-card) !important;
            border: 1px solid var(--border-secondary) !important;
            border-radius: 16px !important;
            box-shadow: var(--shadow-lg) !important;
            animation: modalSlideIn 0.3s ease !important;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal h2 {
            color: var(--text-primary) !important;
        }

        .modal .close {
            color: var(--text-secondary) !important;
            font-size: 1.5rem !important;
        }

        .modal .close:hover {
            color: var(--accent-orange) !important;
        }

        /* Form Elements */
        .form-group label {
            color: var(--text-primary) !important;
            font-weight: 600 !important;
            margin-bottom: 0.5rem !important;
            display: block !important;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            background: var(--bg-secondary) !important;
            border: 1px solid var(--border-primary) !important;
            color: var(--text-primary) !important;
            border-radius: 8px !important;
            padding: 0.75rem !important;
            width: 100% !important;
            transition: all 0.2s ease !important;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none !important;
            border-color: var(--accent-orange) !important;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1) !important;
        }

        /* Autocomplete Styles */
        .autocomplete-container {
            position: relative !important;
        }

        .autocomplete-suggestions {
            position: absolute !important;
            top: 100% !important;
            left: 0 !important;
            right: 0 !important;
            background: var(--bg-secondary) !important;
            border: 1px solid var(--border-primary) !important;
            border-top: none !important;
            border-radius: 0 0 8px 8px !important;
            max-height: 200px !important;
            overflow-y: auto !important;
            z-index: 1000 !important;
            display: none !important;
        }

        .autocomplete-suggestion {
            padding: 0.75rem !important;
            cursor: pointer !important;
            color: var(--text-primary) !important;
            transition: background-color 0.2s ease !important;
            border-bottom: 1px solid var(--border-secondary) !important;
        }

        .autocomplete-suggestion:hover,
        .autocomplete-suggestion.highlighted {
            background: var(--bg-tertiary) !important;
        }

        .autocomplete-suggestion:last-child {
            border-bottom: none !important;
        }



        /* Asset Dropdown */
        .asset-dropdown {
            background: var(--bg-elevated) !important;
            border: 1px solid var(--border-secondary) !important;
            border-radius: 8px !important;
            box-shadow: var(--shadow-lg) !important;
        }

        .asset-result:hover {
            background: var(--bg-tertiary) !important;
        }

        /* Modern Portfolio Styles */
        .portfolio-section {
            max-width: 1200px !important;
            margin: 0 auto !important;
            padding: 2rem !important;
        }

        .portfolio-header {
            display: flex !important;
            align-items: center !important;
            margin-bottom: 2rem !important;
        }

        .portfolio-brand {
            display: flex !important;
            align-items: center !important;
            gap: 1rem !important;
        }

        .brand-circle {
            width: 48px !important;
            height: 48px !important;
            background: var(--accent-green) !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-weight: 700 !important;
            font-size: 1rem !important;
            color: var(--bg-primary) !important;
        }

        .portfolio-title {
            font-size: 2.5rem !important;
            font-weight: 700 !important;
            color: var(--text-highlight) !important;
            margin: 0 !important;
        }

        .portfolio-value-card {
            background: var(--bg-elevated) !important;
            border: 1px solid var(--border-primary) !important;
            border-radius: 16px !important;
            padding: 2rem !important;
            margin-bottom: 2rem !important;
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
        }

        .portfolio-value-content {
            flex: 1 !important;
        }

        .value-label {
            font-size: 0.9rem !important;
            color: var(--text-secondary) !important;
            text-transform: uppercase !important;
            letter-spacing: 0.1em !important;
            margin-bottom: 0.5rem !important;
        }

        .total-value {
            font-size: 3.5rem !important;
            font-weight: 700 !important;
            color: var(--text-highlight) !important;
            margin-bottom: 0.5rem !important;
        }

        .portfolio-change .positive {
            color: var(--accent-green) !important;
            font-weight: 600 !important;
        }

        .portfolio-actions {
            display: flex !important;
            gap: 1rem !important;
        }

        .portfolio-btn {
            padding: 0.75rem 1.5rem !important;
            border-radius: 12px !important;
            font-weight: 600 !important;
            transition: all 0.3s ease !important;
        }
        
        .portfolio-btn:disabled {
            opacity: 0.6 !important;
            cursor: not-allowed !important;
            transform: scale(0.98) !important;
        }

        .assets-section {
            background: var(--bg-elevated) !important;
            border: 1px solid var(--border-primary) !important;
            border-radius: 16px !important;
            overflow: hidden !important;
        }

        .assets-header {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            padding: 1.5rem 2rem !important;
            border-bottom: 1px solid var(--border-primary) !important;
        }

        .assets-title {
            font-size: 1.25rem !important;
            font-weight: 700 !important;
            color: var(--text-primary) !important;
        }

        .assets-count {
            font-size: 0.9rem !important;
            color: var(--text-secondary) !important;
            background: var(--bg-secondary) !important;
            padding: 0.25rem 0.75rem !important;
            border-radius: 12px !important;
        }

        .assets-table-container {
            padding: 0 !important;
        }

        .assets-table-header {
            display: grid !important;
            grid-template-columns: 1.8fr 0.8fr 1fr 0.8fr 0.8fr 0.8fr 1fr 1.2fr 1fr !important;
            gap: 0.8rem !important;
            padding: 1rem 2rem !important;
            border-bottom: 1px solid var(--border-primary) !important;
            background: var(--bg-secondary) !important;
            font-size: 0.8rem !important;
            font-weight: 600 !important;
            color: var(--text-secondary) !important;
            text-transform: uppercase !important;
            letter-spacing: 0.05em !important;
        }

        .assets-table-body {
            padding: 0 !important;
        }

        .asset-row {
            display: grid !important;
            grid-template-columns: 1.8fr 0.8fr 1fr 0.8fr 0.8fr 0.8fr 1fr 1.2fr 1fr !important;
            gap: 0.8rem !important;
            padding: 1.2rem 2rem !important;
            border-bottom: 1px solid var(--border-primary) !important;
            transition: background 0.2s ease !important;
            align-items: center !important;
        }

        .asset-row:hover {
            background: var(--bg-secondary) !important;
        }

        .asset-row:last-child {
            border-bottom: none !important;
        }

        .asset-col-asset {
            display: flex !important;
            align-items: center !important;
        }

        .asset-info {
            display: flex !important;
            align-items: center !important;
            gap: 1rem !important;
        }

        .asset-icon {
            width: 40px !important;
            height: 40px !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            overflow: hidden !important;
            background: var(--bg-secondary) !important;
            border: 1px solid var(--border-primary) !important;
        }

        .asset-icon img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            border-radius: 50% !important;
        }

        .asset-icon.fallback {
            background: var(--accent-orange) !important;
            color: white !important;
            font-weight: 700 !important;
            font-size: 1.2rem !important;
        }

        .asset-details {
            display: flex !important;
            flex-direction: column !important;
        }

        .asset-name {
            font-weight: 600 !important;
            color: var(--text-primary) !important;
            font-size: 1rem !important;
        }

        .asset-symbol {
            font-size: 0.85rem !important;
            color: var(--text-secondary) !important;
            text-transform: uppercase !important;
        }

        .asset-col-chain,
        .asset-col-quantity,
        .asset-col-risk,
        .asset-col-location,
        .asset-col-cointype {
            display: flex !important;
            align-items: center !important;
            font-weight: 600 !important;
            color: var(--text-primary) !important;
            justify-content: center !important;
            font-size: 0.85rem !important;
        }

        .asset-col-chain {
            justify-content: center !important;
        }

        .chain-badge {
            background: var(--bg-secondary) !important;
            border: 1px solid var(--border-primary) !important;
            border-radius: 12px !important;
            padding: 4px 8px !important;
            font-size: 0.75rem !important;
            font-weight: 600 !important;
            color: var(--text-secondary) !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        .chain-badge[data-chain="ethereum"] {
            background: rgba(98, 126, 234, 0.1) !important;
            border-color: rgba(98, 126, 234, 0.3) !important;
            color: #627eea !important;
        }

        .chain-badge[data-chain="solana"] {
            background: rgba(153, 69, 255, 0.1) !important;
            border-color: rgba(153, 69, 255, 0.3) !important;
            color: #9945ff !important;
        }

        .chain-badge[data-chain="hyperliquid"] {
            background: rgba(0, 255, 100, 0.1) !important;
            border-color: rgba(0, 255, 100, 0.3) !important;
            color: #00ff64 !important;
        }

        .asset-col-value {
            color: var(--text-highlight) !important;
            font-weight: 700 !important;
        }

        .asset-col-actions {
            justify-content: flex-start !important;
            gap: 8px !important;
            align-items: center !important;
        }

        .asset-quantity-input {
            background: var(--bg-secondary) !important;
            border: 1px solid var(--border-primary) !important;
            border-radius: 4px !important;
            padding: 4px 8px !important;
            color: var(--text-primary) !important;
            font-size: 0.9rem !important;
            width: 80px !important;
            text-align: right !important;
        }

        .asset-risk-input, .asset-location-input, .asset-cointype-input {
            background: var(--bg-secondary) !important;
            border: 1px solid var(--border-primary) !important;
            border-radius: 4px !important;
            padding: 4px 8px !important;
            color: var(--text-primary) !important;
            font-size: 0.85rem !important;
            width: 100% !important;
        }

        .asset-risk-input:focus, .asset-location-input:focus, .asset-cointype-input:focus {
            outline: none !important;
            border-color: var(--accent-orange) !important;
            box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.1) !important;
        }

        .asset-edit-btn, .asset-save-btn, .asset-cancel-btn, .asset-delete-btn {
            background: none !important;
            border: none !important;
            color: var(--accent-orange) !important;
            cursor: pointer !important;
            font-size: 0.8rem !important;
            padding: 4px 8px !important;
            border-radius: 4px !important;
            transition: all 0.2s !important;
        }

        .asset-edit-btn:hover, .asset-save-btn:hover {
            background: var(--accent-orange) !important;
            color: white !important;
        }

        .asset-cancel-btn {
            color: var(--text-secondary) !important;
        }

        .asset-cancel-btn:hover {
            background: var(--text-secondary) !important;
            color: white !important;
        }

        .asset-delete-btn {
            color: #dc3545 !important;
        }

        .asset-delete-btn:hover {
            background: #dc3545 !important;
            color: white !important;
        }

        /* Responsive Portfolio */
        @media (max-width: 768px) {
            .portfolio-value-card {
                flex-direction: column !important;
                gap: 1.5rem !important;
                text-align: center !important;
            }

            .portfolio-actions {
                justify-content: center !important;
            }

            .assets-table-header,
            .asset-row {
                grid-template-columns: 1fr !important;
                gap: 0.5rem !important;
            }

            .asset-info {
                justify-content: center !important;
            }
        }

        .total-value {
            background: var(--gradient-primary) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
        }

        /* ========================================
           NEW LANDING PAGE DESIGN SYSTEM
           ======================================== */

        /* Login Screen */
        .login-screen {
            background: var(--bg-primary) !important;
        }

        .login-container {
            background: var(--bg-secondary) !important;
            border: 1px solid var(--border-primary) !important;
            border-radius: 16px !important;
            box-shadow: var(--shadow-lg) !important;
        }

        /* Brand Hero */
        .brand-name {
            font-size: 3rem;
            font-weight: 700;
            color: #00ff88; /* Vibrant light green from reference */
            margin: 0 0 0.5rem 0;
            letter-spacing: 0.05em;
        }

        .brand-tagline {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin: 0;
            font-weight: 400;
        }

        /* Login Cards */
        .login-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .login-card:hover {
            border-color: var(--accent-green);
            box-shadow: 0 4px 12px rgba(0, 212, 170, 0.1);
            transform: translateY(-2px);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0 0 1.5rem 0;
        }

        /* Button Hover Effects */
        .manager-btn:hover {
            background: #00cc6a !important; /* Darker green on hover */
            color: #000000 !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
        }

        .investor-btn:hover {
            background: #ff6b35 !important; /* Darker orange on hover */
            color: #ffffff !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
        }

        /* Primary Investor Login Styling */
        .investor-login-main {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            padding: 2rem;
            margin: 0 auto;
        }

        .investor-login-main h2 {
            color: var(--text-primary);
            margin-bottom: 1.5rem;
        }

        /* Input Field Styling */
        #investorIdInput:focus {
            outline: none;
            border-color: #00ff88 !important;
            box-shadow: 0 0 0 3px rgba(0, 255, 136, 0.1);
        }

        #investorIdInput::placeholder {
            color: var(--text-muted);
            opacity: 0.7;
        }

        /* Manager Access Button Styling */
        .manager-access .manager-btn:hover {
            background: #00cc6a !important; /* Darker green on hover */
            color: #000000 !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .login-container {
                max-width: 90% !important;
                padding: 2rem 1.5rem !important;
            }
            
            .brand-name {
                font-size: 2.5rem !important;
            }

            .investor-login-main {
                padding: 1.5rem !important;
            }

            .manager-access {
                position: static !important;
                text-align: center !important;
                margin-top: 2rem !important;
            }

            .manager-access .manager-btn {
                width: 100% !important;
                max-width: 200px !important;
            }
        }

        @media (max-width: 480px) {
            .login-screen {
                padding: 1rem !important;
            }

            .brand-name {
                font-size: 2rem !important;
            }

            .investor-login-main h2 {
                font-size: 1.25rem !important;
            }
        }

        .login-card {
            background: var(--gradient-card) !important;
            border: 1px solid var(--border-primary) !important;
            border-radius: 12px !important;
            transition: all 0.3s ease !important;
        }

        .login-card:hover {
            border-color: var(--accent-orange) !important;
            transform: translateY(-4px) !important;
            box-shadow: var(--shadow-glow) !important;
        }

        .login-card h3 {
            color: var(--text-primary) !important;
        }

        .login-card p {
            color: var(--text-secondary) !important;
        }

        /* Tab Content - Hide by default, show when active */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Better contrast for specific elements */
        .portfolio-value-display .total-value {
            color: var(--text-highlight) !important;
        }

        .portfolio-value-display .last-updated {
            color: var(--text-secondary) !important;
        }

        /* Table improvements */
        .data-table td strong {
            color: var(--text-primary) !important; /* Use same readable color as other text */
            font-weight: 600 !important; /* Keep it bold for emphasis */
        }

        /* Empty state improvements */
        .data-table td[colspan] {
            color: var(--text-secondary) !important;
        }



        /* Modal improvements */
        .modal h2 {
            color: var(--text-highlight) !important;
        }

        /* Asset dropdown improvements */
        .asset-result div:first-child {
            color: var(--text-primary) !important;
        }

        .asset-result div:last-child {
            color: var(--text-secondary) !important;
        }

        .asset-result:hover div:first-child {
            color: var(--text-highlight) !important;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-secondary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-orange);
        }

        /* ========================================
           WAGMI DESIGN SYSTEM - FOUNDATION
           ======================================== */

        :root {
            /* Color Palette */
            --primary-orange: #ff6b35;
            --primary-green: #00d4aa;
            --secondary-purple: #8b5cf6;
            --secondary-blue: #3b82f6;
            
            /* Neutral Colors */
            --neutral-dark: #1a1d23;
            --neutral-surface: #2d3139;
            --neutral-border: #3f3f46;
            --text-primary: #e5e7eb;
            --text-secondary: #9ca3af;
            --text-muted: #6b7280;
            
            /* Status Colors */
            --status-success: #10b981;
            --status-error: #ef4444;
            --status-warning: #f59e0b;
            
            /* Typography */
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-size-xl: 2rem;
            --font-size-l: 1.5rem;
            --font-size-body: 1rem;
            --font-size-caption: 0.875rem;
            --font-weight-normal: 400;
            --font-weight-semibold: 600;
            --line-height: 1.6;
            
            /* Spacing */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 20px;
            --space-6: 24px;
            --space-8: 32px;
            --space-10: 40px;
            --space-12: 48px;
            
            /* Border Radius */
            --radius-button: 8px;
            --radius-card: 16px;
            --radius-modal: 20px;
            
            /* Shadows */
            --shadow-card: 0 4px 12px rgba(0,0,0,0.2);
            --shadow-modal: 0 8px 20px rgba(0,0,0,0.25);
            
            /* Animations */
            --transition-fast: 150ms ease-in-out;
            --transition-normal: 300ms ease-in-out;
            --transition-slow: 400ms ease-in-out;
            --easing: cubic-bezier(0.4,0,0.2,1);
        }

        /* Base Typography */
        body {
            font-family: var(--font-family);
            font-size: var(--font-size-body);
            font-weight: var(--font-weight-normal);
            line-height: var(--line-height);
            color: var(--text-primary);
            background-color: var(--neutral-dark);
            margin: 0;
            padding: 0;
        }

        /* Headings */
        h1, h2, h3, h4, h5, h6 {
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin: 0 0 var(--space-4) 0;
        }

        h1 { font-size: var(--font-size-xl); }
        h2 { font-size: var(--font-size-l); }
        h3 { font-size: var(--font-size-body); }

        /* Base Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-button);
            font-weight: var(--font-weight-semibold);
            font-size: var(--font-size-body);
            transition: all var(--transition-fast);
            cursor: pointer;
            border: none;
            text-decoration: none;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            border: 1px solid var(--primary-green);
        }

        .btn-primary:hover {
            background: #00b894;
            border-color: #00b894;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--primary-orange);
            color: white;
            border: 1px solid var(--primary-orange);
        }

        .btn-secondary:hover {
            background: #e55a2b;
            border-color: #e55a2b;
            transform: translateY(-1px);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--neutral-border);
        }

        .btn-outline:hover {
            background: var(--neutral-surface);
            border-color: var(--text-secondary);
        }

        /* Base Card Styles */
        .card {
            background: var(--neutral-surface);
            border: 1px solid var(--neutral-border);
            border-radius: var(--radius-card);
            padding: var(--space-6);
            box-shadow: var(--shadow-card);
            transition: all var(--transition-normal);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        /* Base Input Styles */
        .form-input {
            width: 100%;
            padding: var(--space-3) var(--space-4);
            border: 1px solid var(--neutral-border);
            border-radius: var(--radius-button);
            background: var(--neutral-surface);
            color: var(--text-primary);
            font-size: var(--font-size-body);
            font-family: inherit;
            transition: all var(--transition-fast);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.1);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        /* Base Table Styles */
        .table {
            width: 100%;
            border-collapse: collapse;
            background: var(--neutral-surface);
            border-radius: var(--radius-card);
            overflow: hidden;
            box-shadow: var(--shadow-card);
        }

        .table th {
            background: var(--neutral-dark);
            color: var(--text-primary);
            font-weight: var(--font-weight-semibold);
            padding: var(--space-4);
            text-align: left;
            border-bottom: 1px solid var(--neutral-border);
        }

        .table td {
            padding: var(--space-4);
            border-bottom: 1px solid var(--neutral-border);
            color: var(--text-primary);
        }

        .table tbody tr:hover {
            background: rgba(0, 212, 170, 0.05);
        }

        /* Conditional Formatting */
        .positive {
            color: var(--primary-green);
        }

        .negative {
            color: var(--status-error);
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-muted { color: var(--text-muted); }
        .text-secondary { color: var(--text-secondary); }

        .mb-1 { margin-bottom: var(--space-1); }
        .mb-2 { margin-bottom: var(--space-2); }
        .mb-3 { margin-bottom: var(--space-3); }
        .mb-4 { margin-bottom: var(--space-4); }
        .mb-6 { margin-bottom: var(--space-6); }

        .mt-1 { margin-top: var(--space-1); }
        .mt-2 { margin-top: var(--space-2); }
        .mt-3 { margin-top: var(--space-3); }
        .mt-4 { margin-top: var(--space-4); }
        .mt-6 { margin-top: var(--space-6); }

        .p-1 { padding: var(--space-1); }
        .p-2 { padding: var(--space-2); }
        .p-3 { padding: var(--space-3); }
        .p-4 { padding: var(--space-4); }
        .p-6 { padding: var(--space-6); }

        /* KPI Ribbon Component */
        .kpi-ribbon {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
            margin-bottom: var(--space-8);
            padding: var(--space-6);
            background: var(--neutral-surface);
            border: 1px solid var(--neutral-border);
            border-radius: var(--radius-card);
            box-shadow: var(--shadow-card);
        }

        .kpi-metric {
            text-align: center;
        }

        .kpi-label {
            font-size: var(--font-size-caption);
            color: var(--text-secondary);
            font-weight: var(--font-weight-semibold);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-2);
        }

        .kpi-value {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            line-height: 1.2;
        }

        .kpi-value.positive {
            color: var(--primary-green);
        }

        .kpi-value.negative {
            color: var(--status-error);
        }
        
        /* Filter Chip Styles */
        .filter-chip {
            position: relative;
            overflow: hidden;
        }
        
        .filter-chip:hover {
            border-color: #00ff88 !important;
            color: #00ff88 !important;
            box-shadow: 0 0 8px rgba(0, 255, 136, 0.3);
        }
        
        .filter-chip.active {
            background: #00ff88 !important;
            color: #000 !important;
            border-color: #00ff88 !important;
            font-weight: 600 !important;
        }
        
        .filter-chip.active.negative {
            background: #ff4757 !important;
            color: #fff !important;
            border-color: #ff4757 !important;
        }
        
        .filter-chip.active.high {
            background: #3742fa !important;
            color: #fff !important;
            border-color: #3742fa !important;
        }
        
        .filter-chip.disabled {
            opacity: 0.4 !important;
            cursor: not-allowed !important;
            border-color: #2d3139 !important;
            color: #5a5f6a !important;
        }
        
        .filter-chip.disabled:hover {
            border-color: #2d3139 !important;
            color: #5a5f6a !important;
            box-shadow: none !important;
        }
        
        /* Privacy Mode Toggle Styles */
        #privacyToggleSwitch.privacy-on {
            background: rgba(0, 212, 170, 0.9) !important;
        }
        
        #privacyToggleSwitch.privacy-on #privacyToggleKnob {
            transform: translateX(20px) !important;
        }
        
        #privacyToggleSwitch.privacy-on #privacyToggleIcon {
            color: #FFFFFF !important;
        }
        
        /* Privacy Mode Masking Styles */
        .privacy-masked {
            color: #8A8F98 !important;
            opacity: 0.7 !important;
            user-select: none !important;
            -webkit-user-select: none !important;
            -moz-user-select: none !important;
            -ms-user-select: none !important;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- REFINED LOGIN/SELECTION SCREEN -->
        <div id="loginScreen" class="login-screen" style="display: flex; align-items: center; justify-content: center; min-height: 100vh; background: var(--bg-primary); padding: 2rem; position: relative;">
            
            <!-- Main Login Container -->
            <div class="login-container" style="max-width: 500px; width: 100%; background: var(--bg-secondary); border: 1px solid var(--border-primary); border-radius: 16px; box-shadow: var(--shadow-lg); padding: 3rem; text-align: center;">
                
                <!-- Brand Hero Area -->
                <div class="brand-hero" style="margin-bottom: 3rem;">
                    <h1 class="brand-name" style="font-size: 3rem; font-weight: 700; color: #00ff88; margin: 0 0 0.5rem 0; letter-spacing: 0.05em;">
                        WAGMI
                </h1>
                    <p class="brand-tagline" style="font-size: 1.1rem; color: var(--text-secondary); margin: 0; font-weight: 400;">
                        We're All Gonna Make It
                    </p>
                    </div>

                <!-- Primary Investor Login Section -->
                <div class="investor-login-main" style="margin-bottom: 2rem;">
                    <h2 style="font-size: 1.5rem; font-weight: 600; color: var(--text-primary); margin: 0 0 1.5rem 0;">
                        Access Your Portfolio
                    </h2>
                    <div class="investor-form" style="margin-bottom: 1.5rem;">
                        <input type="text" id="investorIdInput" placeholder="Enter your Investor ID (e.g., OAG)" style="width: 100%; padding: 1rem 1.25rem; border: 2px solid var(--border-primary); border-radius: 12px; background: var(--bg-primary); color: var(--text-primary); font-size: 1.1rem; margin-bottom: 0.75rem; text-align: center; transition: all 0.3s ease;">
                        <div id="investorError" class="error-message" style="color: var(--accent-orange); font-size: 0.875rem; text-align: center; display: none;">
                            Invalid Investor ID
                        </div>
                    </div>
                    <button class="btn btn-primary investor-btn" id="investorPortalButton" style="width: 100%; padding: 1.25rem 2rem; background: var(--accent-orange); color: var(--bg-primary); border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                        Access My Portfolio
                    </button>
                </div>
                
                <!-- Help Text -->
                <div style="font-size: 0.9rem; color: var(--text-muted); line-height: 1.5;">
                    <p>Don't have your Investor ID? Contact your fund manager for access credentials.</p>
                </div>
            </div>

            <!-- Manager Dashboard Access (Bottom Right) -->
            <div class="manager-access" style="position: absolute; bottom: 2rem; right: 2rem;">
                <button class="btn btn-primary manager-btn" id="managerPortalButton" style="padding: 0.75rem 1.5rem; background: #00ff88; color: #000000; border: none; border-radius: 8px; font-size: 0.875rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                    Access Manager Dashboard
                </button>
            </div>
        </div>

        <!-- Investor ID Input Modal -->
        <div id="investorLoginModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="app.closeInvestorLogin()">&times;</span>
                <h2>Investor Access</h2>
                <p style="color: #666; margin-bottom: 20px;">Enter your unique Investor ID to access your portfolio</p>
                <div class="investor-id-form">
                    <input type="text" id="investorIdInput" placeholder="e.g., OA6" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; margin-bottom: 15px; text-transform: uppercase;">
                    <button class="btn btn-primary" onclick="app.loginWithInvestorId()" style="width: 100%;">Access My Portfolio</button>
                </div>
                <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; font-size: 14px; color: #666;">
                    <strong>Investor ID Format:</strong> First Name + Last Name Initial + Number<br>
                    <em>Example: Omair Ansari (#6) → OA6</em><br><br>
                    <strong>Don't have your Investor ID?</strong><br>
                    Contact your fund manager to receive your secure access credentials.
                </div>
            </div>
        </div>

        <!-- Manager View -->
        <div id="managerView" class="view-container" style="display: none;">

            <!-- Main Content -->
            <main class="main" style="padding: 0 24px;">
            
            <!-- KPI Ribbon - Top of Every Page -->
            <div class="kpi-ribbon" style="
                background: #121212;
                border: none;
                border-bottom: 1px solid #2d3139;
                border-radius: 0;
                padding: 16px 0;
                display: flex;
                align-items: center;
                justify-content: space-between;
                position: sticky;
                top: 0;
                z-index: 100;
                box-shadow: none;
            ">
                <!-- Brand Section -->
                <div style="display: flex; align-items: center; gap: 24px;">
                    <div onclick="window.backToLogin()" style="font-size: 24px; font-weight: 700; color: #00ff88; letter-spacing: 0.05em; cursor: pointer; transition: opacity 0.2s;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">WAGMI</div>
                    
                    <!-- Separator -->
                    <div style="width: 1px; height: 24px; background: #3d4148;"></div>

            <!-- Navigation -->
                    <nav style="display: flex; gap: 20px;">
                        <a href="#" onclick="window.switchTab('dashboard')" class="nav-link" data-tab="dashboard" style="color: #e2e8f0; text-decoration: none; font-size: 14px; transition: color 0.2s; cursor: pointer;" onmouseover="if(!this.classList.contains('active')) this.style.color='#00ff88'" onmouseout="if(!this.classList.contains('active')) this.style.color='#e2e8f0'">Dashboard</a>
                        <a href="#" onclick="window.switchTab('investors')" class="nav-link" data-tab="investors" style="color: #e2e8f0; text-decoration: none; font-size: 14px; transition: color 0.2s; cursor: pointer;" onmouseover="if(!this.classList.contains('active')) this.style.color='#00ff88'" onmouseout="if(!this.classList.contains('active')) this.style.color='#e2e8f0'">Investors</a>
                        <a href="#" onclick="window.switchTab('portfolio')" class="nav-link" data-tab="portfolio" style="color: #e2e8f0; text-decoration: none; font-size: 14px; transition: color 0.2s; cursor: pointer;" onmouseover="if(!this.classList.contains('active')) this.style.color='#00ff88'" onmouseout="if(!this.classList.contains('active')) this.style.color='#e2e8f0'">Portfolio</a>
                        <a href="#" onclick="window.switchTab('performance')" class="nav-link" data-tab="performance" style="color: #e2e8f0; text-decoration: none; font-size: 14px; transition: color 0.2s; cursor: pointer;" onmouseover="if(!this.classList.contains('active')) this.style.color='#00ff88'" onmouseout="if(!this.classList.contains('active')) this.style.color='#e2e8f0'">Performance</a>
            </nav>
                    </div>
                
                <!-- KPI Metrics -->
                <div style="display: flex; align-items: center; gap: 24px;">
                    <!-- Active Investors -->
                    <div class="kpi-metric" style="text-align: center;">
                        <div style="font-size: 12px; color: #94a3b8; margin-bottom: 2px;">Active investors</div>
                        <div id="kpiActiveInvestors" style="font-size: 16px; font-weight: 600; color: #ffffff;">0</div>
                    </div>
                    
                    <!-- Separator -->
                    <div style="width: 1px; height: 24px; background: #3d4148;"></div>
                    
                    <!-- Total AUM -->
                    <div class="kpi-metric" style="text-align: center;">
                        <div style="font-size: 12px; color: #94a3b8; margin-bottom: 2px;">Total AUM</div>
                        <div id="kpiTotalAUM" data-kpi="total-aum" style="font-size: 16px; font-weight: 600; color: #ffffff;">$0.00</div>
                </div>
                    
                    <!-- Separator -->
                    <div style="width: 1px; height: 24px; background: #3d4148;"></div>
                    
                    <!-- Cumulative Return -->
                    <div class="kpi-metric" style="text-align: center; min-width: 80px;">
                        <div style="font-size: 12px; color: #94a3b8; margin-bottom: 2px; white-space: nowrap;">Cum. Return</div>
                        <div id="kpiCumulativeReturn" style="font-size: 16px; font-weight: 600; color: #00ff88;">+0.0%</div>
                                </div>
                    
                    <!-- Separator -->
                    <div style="width: 1px; height: 24px; background: #3d4148;"></div>
                    
                    <!-- Month-on-Month -->
                    <div class="kpi-metric" style="text-align: center; min-width: 60px;">
                        <div style="font-size: 12px; color: #94a3b8; margin-bottom: 2px; white-space: nowrap;">MoM</div>
                        <div id="kpiMonthlyReturn" style="font-size: 16px; font-weight: 600; color: #00ff88;">+0.0%</div>
                            </div>
                            </div>
                
                <!-- Privacy Mode & Last Updated Section -->
                <div style="display: flex; align-items: center; gap: 16px;">
                    <!-- Privacy Mode Icon -->
                    <div style="display: flex; align-items: center;">
                        <div id="privacyModeIcon" 
                             style="display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; color: #8A8F98; opacity: 0.7; cursor: help;" 
                             title="Privacy mode is enforced." 
                             aria-label="Privacy mode is enforced">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                <line x1="1" y1="1" x2="23" y2="23"></line>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- Last Updated & Refresh -->
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <i data-lucide="clock" style="width: 16px; height: 16px; color: #94a3b8;"></i>
                        <span id="kpiLastUpdated" style="font-size: 12px; color: #94a3b8;">Last updated: Loading...</span>
                        <button onclick="window.refreshPortfolioData()" style="background: none; border: none; cursor: pointer; padding: 4px; border-radius: 4px; transition: all 0.2s;" onmouseover="this.style.background='#3d4148'; this.querySelector('svg').style.color='#00ff88'; this.querySelector('svg').style.transform='rotate(180deg)'" onmouseout="this.style.background='none'; this.querySelector('svg').style.color='#94a3b8'; this.querySelector('svg').style.transform='rotate(0deg)'">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="color: #94a3b8; transition: all 0.3s ease;">
                                <path d="M4 12a8 8 0 0 1 8-8V2l4 4-4 4V8a6 6 0 1 0 6 6h2a8 8 0 0 1-16 0z" fill="currentColor"/>
                                <path d="M20 12a8 8 0 0 1-8 8v2l-4-4 4-4v4a6 6 0 1 0-6-6H2a8 8 0 0 1 16 0z" fill="currentColor"/>
                            </svg>
                        </button>
                            </div>
                        </div>
                            </div>
            
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">

                <div class="dashboard-grid">
                    <!-- Investment Summaries -->
                    <section class="card">
                        <h2>Investment Summaries</h2>
                        <div id="investmentSummaries" class="summaries-grid">
                            <!-- Investment summary cards will be generated here -->
                        </div>

                    </section>

                    <!-- Portfolio Overview -->
                    <section class="card">
                        <h2>Portfolio Allocation</h2>
                        <div class="chart-container">
                            <canvas id="allocationChart"></canvas>
                        </div>
                    </section>

                    <!-- Recent Transactions -->
                    <section class="card">
                        <h2>Recent Transactions</h2>
                        <div id="recentTransactions" class="transactions-list">
                            <!-- Recent transactions will be shown here -->
                        </div>
                    </section>

                    <!-- Performance Chart -->
                    <section class="card">
                        <h2>Portfolio Performance</h2>
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Investors Tab -->
            <div id="investors" class="tab-content">

                <div class="investors-header">
                    <!-- Unified Search and Filter Controls -->
                    <div class="investor-controls" style="margin-bottom: 24px;">
                        <div style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap;">
                            <!-- Search Bar -->
                            <input type="text" id="investorSearch" placeholder="Search by ID or Name..." 
                                   style="flex: 0 0 200px; padding: 12px 16px; border: 1px solid #3d4148; border-radius: 12px; background: #1a1d23; color: #e2e8f0; font-size: 14px; transition: border-color 0.2s;"
                                   oninput="window.filterInvestors(); window.updateClearAllButton();"
                                   onfocus="this.style.borderColor='#00ff88'"
                                   onblur="this.style.borderColor='#3d4148'">
                            
                            <!-- Filter Tags Container -->
                            <div style="display: flex; gap: 12px; align-items: flex-start; flex-wrap: wrap; flex: 1;">
                                <!-- Return Filters Group -->
                                <div style="display: flex; flex-direction: column; gap: 4px; align-items: flex-start;">
                                    <span style="color: #7f8c8d; font-size: 8.8px; font-weight: 400; text-transform: uppercase; letter-spacing: 0.5px; opacity: 0.5;">Returns</span>
                                    <div style="display: flex; gap: 6px; align-items: center;">
                                        <button class="filter-chip" data-filter="positive" data-group="returns" onclick="window.toggleFilter('positive')" 
                                                style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                                            Positive
                                        </button>
                                        <button class="filter-chip" data-filter="negative" data-group="returns" onclick="window.toggleFilter('negative')" 
                                                style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                                            Negative
                                        </button>
                                        <button class="filter-chip" data-filter="high" data-group="returns" onclick="window.toggleFilter('high')" 
                                                style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                                            High (50%+)
                                        </button>
                            </div>
                        </div>
                                
                                <!-- Investment Size Filters Group -->
                                <div style="display: flex; flex-direction: column; gap: 4px; align-items: flex-start;">
                                    <span style="color: #7f8c8d; font-size: 8.8px; font-weight: 400; text-transform: uppercase; letter-spacing: 0.5px; opacity: 0.5;">Size</span>
                                    <div style="display: flex; gap: 6px; align-items: center;">
                                        <button class="filter-chip" data-filter="small" data-group="size" onclick="window.toggleFilter('small')" 
                                                style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                                            Small (&lt;$1K)
                                        </button>
                                        <button class="filter-chip" data-filter="medium" data-group="size" onclick="window.toggleFilter('medium')" 
                                                style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                                            Medium ($1K-$5K)
                                        </button>
                                        <button class="filter-chip" data-filter="large" data-group="size" onclick="window.toggleFilter('large')" 
                                                style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                                            Large (&gt;$5K)
                                        </button>
                            </div>
                            </div>
                                
                                <!-- AUM Filters Group -->
                                <div style="display: flex; flex-direction: column; gap: 4px; align-items: flex-start;">
                                    <span style="color: #7f8c8d; font-size: 8.8px; font-weight: 400; text-transform: uppercase; letter-spacing: 0.5px; opacity: 0.5;">AUM %</span>
                                    <div style="display: flex; gap: 6px; align-items: center;">
                                        <button class="filter-chip" data-filter="minor" data-group="aum" onclick="window.toggleFilter('minor')" 
                                                style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                                            Minor (&lt;5%)
                                        </button>
                                        <button class="filter-chip" data-filter="moderate" data-group="aum" onclick="window.toggleFilter('moderate')" 
                                                style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                                            Moderate (5-20%)
                                        </button>
                                        <button class="filter-chip" data-filter="major" data-group="aum" onclick="window.toggleFilter('major')" 
                                                style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                                            Major (&gt;20%)
                                        </button>
                            </div>
                            </div>
                                
                                <!-- Clear All Button -->
                                <button id="clearAllButton" onclick="window.clearAllFilters()" 
                                        style="padding: 6px 12px; border: 1px solid #3d4148; border-radius: 16px; background: transparent; color: #7f8c8d; font-size: 12px; cursor: default; transition: all 0.2s; font-weight: 500; margin-top: 20px;">
                                    Clear All
                                </button>
                            </div>
                        </div>
                            </div>
                </div>
                <div class="table-container">
                    <table id="investorsTable" class="data-table">
                        <thead>
                            <tr>
                                <th onclick="window.sortInvestors('id')" class="sortable-header sticky-column" style="cursor: pointer; user-select: none; position: relative; padding: 12px 16px; position: sticky; left: 0; background: #1a1d23; z-index: 10; border-right: 1px solid #2d3139;" onmouseover="this.style.background='#2d3139'; this.querySelector('.sort-indicator').style.color='#00ff88'" onmouseout="this.style.background='#1a1d23'; this.querySelector('.sort-indicator').style.color='#7f8c8d'">
                                    <span class="sort-indicator" style="position: absolute; left: 0.75px; top: 50%; transform: translateY(-50%); color: #7f8c8d; transition: color 0.2s ease;">↕</span> ID
                                </th>
                                <th onclick="window.sortInvestors('name')" class="sortable-header" style="cursor: pointer; user-select: none; position: relative; padding: 12px 16px;" onmouseover="this.style.background='#2d3139'; this.querySelector('.sort-indicator').style.color='#00ff88'" onmouseout="this.style.background=''; this.querySelector('.sort-indicator').style.color='#7f8c8d'">
                                    <span class="sort-indicator" style="position: absolute; left: 0.75px; top: 50%; transform: translateY(-50%); color: #7f8c8d; transition: color 0.2s ease;">↕</span> Name
                                </th>
                                <th onclick="window.sortInvestors('date')" class="sortable-header" style="cursor: pointer; user-select: none; position: relative; padding: 12px 16px; text-align: center !important;" onmouseover="this.style.background='#2d3139'; this.querySelector('.sort-indicator').style.color='#00ff88'" onmouseout="this.style.background=''; this.querySelector('.sort-indicator').style.color='#7f8c8d'">
                                    <span class="sort-indicator" style="position: absolute; left: 0.75px; top: 50%; transform: translateY(-50%); color: #7f8c8d; transition: color 0.2s ease;">↕</span> Initial Investment Date
                                </th>
                                <th onclick="window.sortInvestors('investment')" class="sortable-header" style="cursor: pointer; user-select: none; position: relative; padding: 12px 16px; text-align: center !important;" onmouseover="this.style.background='#2d3139'; this.querySelector('.sort-indicator').style.color='#00ff88'" onmouseout="this.style.background=''; this.querySelector('.sort-indicator').style.color='#7f8c8d'">
                                    <span class="sort-indicator" style="position: absolute; left: 0.75px; top: 50%; transform: translateY(-50%); color: #7f8c8d; transition: color 0.2s ease;">↕</span> Total Investment ($)
                                </th>
                                <th onclick="window.sortInvestors('aum')" class="sortable-header" style="cursor: pointer; user-select: none; position: relative; padding: 12px 16px; text-align: center !important;" onmouseover="this.style.background='#2d3139'; this.querySelector('.sort-indicator').style.color='#00ff88'" onmouseout="this.style.background=''; this.querySelector('.sort-indicator').style.color='#7f8c8d'">
                                    <span class="sort-indicator" style="position: absolute; left: 0.75px; top: 50%; transform: translateY(-50%); color: #7f8c8d; transition: color 0.2s ease;">↕</span> Share of AUM ($)
                                </th>
                                <th onclick="window.sortInvestors('share')" class="sortable-header" style="cursor: pointer; user-select: none; position: relative; padding: 12px 16px; text-align: center !important;" onmouseover="this.style.background='#2d3139'; this.querySelector('.sort-indicator').style.color='#00ff88'" onmouseout="this.style.background=''; this.querySelector('.sort-indicator').style.color='#7f8c8d'">
                                    <span class="sort-indicator" style="position: absolute; left: 0.75px; top: 50%; transform: translateY(-50%); color: #7f8c8d; transition: color 0.2s ease;">↕</span> Share of AUM (%)
                                </th>
                                <th onclick="window.sortInvestors('return')" class="sortable-header" style="cursor: pointer; user-select: none; position: relative; padding: 12px 16px; text-align: center !important;" onmouseover="this.style.background='#2d3139'; this.querySelector('.sort-indicator').style.color='#00ff88'" onmouseout="this.style.background=''; this.querySelector('.sort-indicator').style.color='#7f8c8d'">
                                    <span class="sort-indicator" style="position: absolute; left: 0.75px; top: 50%; transform: translateY(-50%); color: #7f8c8d; transition: color 0.2s ease;">↕</span> Return (%)
                                </th>
                                <th style="cursor: default; text-align: center; width: 80px;"></th>
                            </tr>
                        </thead>
                        <tbody id="investorsTableBody">
                            <!-- Investor rows will be generated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Portfolio Tab -->
            <div id="portfolio" class="tab-content">
                    <!-- Portfolio Header -->
                <div class="portfolio-header">
                        <div class="portfolio-brand">
                            <div class="brand-circle">WAGMI</div>
                            <h1 class="portfolio-title">Portfolio</h1>
                    </div>
                </div>
                
                    <!-- Portfolio Analysis Charts -->
                    <div class="portfolio-charts-section" style="margin: 30px 0;">
                        <div class="charts-header" style="text-align: center; margin-bottom: 30px;">
                            <h2 style="color: var(--text-primary); font-size: 1.8rem; margin-bottom: 10px;">📊 Portfolio Analysis</h2>
                            <p style="color: var(--text-secondary); font-size: 1rem;">Portfolio allocation breakdown by category</p>
                        </div>
                        <div class="stacked-chart-container" style="background: var(--bg-elevated); border-radius: 12px; padding: 30px; border: 1px solid var(--border-primary);">
                            <div class="chart-container" style="position: relative; height: 400px;">
                                <canvas id="portfolioStackedChart"></canvas>
                            </div>
                    </div>
                </div>

                    <!-- Target vs Current Allocation Analysis -->
                    <div class="target-allocation-section" style="margin-bottom: 40px;">
                        <div class="section-header" style="margin-bottom: 25px;">
                            <h3 style="color: var(--text-primary); margin-bottom: 8px; font-size: 1.5rem;">🎯 Target vs Current Allocation</h3>
                            <p style="color: var(--text-secondary); font-size: 1rem;">Compare portfolio allocation against target risk distribution</p>
                        </div>
                        
                        <!-- Target vs Current Stacked Bar Charts -->
                        <div class="allocation-charts-container" style="background: var(--bg-elevated); border-radius: 12px; padding: 30px; border: 1px solid var(--border-primary);">
                            <div class="chart-container" style="position: relative; height: 400px;">
                                <canvas id="targetVsCurrentChart"></canvas>
                    </div>
                        </div>
                    </div>

                    <!-- Asset Holdings -->
                    <div class="assets-section">
                        <div class="assets-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <div class="assets-header-left" style="display: flex; align-items: center; gap: 15px;">
                                <div class="assets-title">Assets</div>
                                <div class="assets-count" id="assetsCount">0 assets</div>
                        </div>
                            <div class="assets-header-right">
                                <button class="btn btn-primary" onclick="window.openAddAssetModal()" style="padding: 10px 20px; font-size: 0.9rem;">
                                    <span style="margin-right: 8px;">+</span>Add Asset
                                </button>
                    </div>
                        </div>
                        
                        <div class="assets-table-container">
                            <div class="assets-table-header">
                                <div class="asset-col-asset">Asset</div>
                                <div class="asset-col-chain">Chain</div>
                                <div class="asset-col-quantity">Quantity</div>
                                <div class="asset-col-risk">Risk</div>
                                <div class="asset-col-location">Location</div>
                                <div class="asset-col-cointype">Type</div>
                                <div class="asset-col-price">Price</div>
                                <div class="asset-col-value">Value</div>
                                <div class="asset-col-actions">Actions</div>
                </div>

                            <div class="assets-table-body" id="portfolioTableBody">
                                <!-- Portfolio data will be loaded here dynamically -->
                                <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                                    <div style="font-size: 2rem; margin-bottom: 16px;">📊</div>
                                    <div style="font-size: 1.1rem; margin-bottom: 8px;">Loading portfolio...</div>
                                    <div style="font-size: 0.9rem;">Fetching data from Google Sheets</div>
                        </div>
                    </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Tab -->
            <div id="performance" class="tab-content">
                <div class="performance-header">
                    <h2>Performance Analytics</h2>
                    <div class="date-filters">
                        <select id="periodFilter">
                            <option value="1M">1 Month</option>
                            <option value="3M">3 Months</option>
                            <option value="6M">6 Months</option>
                            <option value="1Y" selected>1 Year</option>
                            <option value="ALL">All Time</option>
                        </select>
                    </div>
                </div>
                <div class="performance-grid">
                    <div class="card">
                        <h3>Fund Performance</h3>
                        <div class="performance-metrics">
                            <div class="metric">
                                <span class="metric-label">Net Inflows</span>
                                <span class="metric-value" id="netInflows">$0.00</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Capital Appreciation</span>
                                <span class="metric-value" id="capitalAppreciation">$0.00</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Cumulative Return</span>
                                <span class="metric-value" id="cumulativeReturn">0.00%</span>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Monthly Performance</h3>
                        <div class="chart-container">
                            <canvas id="monthlyPerformanceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            </main>
        </div>

        <!-- Investor View -->
        <div id="investorView" class="view-container" style="display: none;">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <div class="header-left">
                        <h1>📊 Investment Portal</h1>
                        <span class="view-badge investor">Investor View</span>
                        <span id="investorNameDisplay" class="investor-name"></span>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="window.backToLogin()">Switch Account</button>
                    </div>
                    <div class="header-stats">
                        <div class="stat-card">
                            <span class="stat-label">My Investment</span>
                            <span class="stat-value" id="myInvestmentValue">$0.00</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Total Return</span>
                            <span class="stat-value" id="myTotalReturn">0.00%</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Share Holdings</span>
                            <span class="stat-value" id="myShareHoldings">0.00%</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Investor Navigation -->
            <nav class="nav">
                <button class="nav-btn active" data-tab="investor-summary">Summary</button>
                <button class="nav-btn" data-tab="investor-performance">Performance</button>
                <button class="nav-btn" data-tab="investor-statements">Statements</button>
            </nav>

            <!-- Investor Main Content -->
            <main class="main">
                <!-- Investor Summary Tab -->
                <div id="investor-summary" class="tab-content active">
                    <div class="investor-dashboard-grid">
                        <!-- Personal Investment Summary -->
                        <section class="card investor-summary-card">
                            <h2>My Investment Summary</h2>
                            <div id="personalSummary" class="personal-summary">
                                <!-- Personal summary will be generated here -->
                            </div>
                        </section>

                        <!-- Portfolio Allocation (My Share) -->
                        <section class="card">
                            <h2>My Portfolio Allocation</h2>
                            <div class="chart-container">
                                <canvas id="myAllocationChart"></canvas>
                            </div>
                        </section>

                        <!-- Investment History -->
                        <section class="card">
                            <h2>My Investment History</h2>
                            <div id="myTransactionHistory" class="transaction-history">
                                <!-- Personal transaction history will be shown here -->
                            </div>
                        </section>

                        <!-- Performance Overview -->
                        <section class="card">
                            <h2>Performance Overview</h2>
                            <div class="chart-container">
                                <canvas id="myPerformanceChart"></canvas>
                            </div>
                        </section>
                    </div>
                </div>

                <!-- Investor Performance Tab -->
                <div id="investor-performance" class="tab-content">
                    <div class="performance-grid">
                        <div class="card">
                            <h2>Detailed Performance Metrics</h2>
                            <div class="investor-metrics">
                                <div class="metric-row">
                                    <span class="metric-label">Initial Investment Date</span>
                                    <span class="metric-value" id="myInvestmentDate">-</span>
                                </div>
                                <div class="metric-row">
                                    <span class="metric-label">Days Invested</span>
                                    <span class="metric-value" id="myDaysInvested">-</span>
                                </div>
                                <div class="metric-row">
                                    <span class="metric-label">Capital Appreciation</span>
                                    <span class="metric-value" id="myCapitalAppreciation">$0.00</span>
                                </div>
                                <div class="metric-row">
                                    <span class="metric-label">Annualized Return</span>
                                    <span class="metric-value" id="myAnnualizedReturn">0.00%</span>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <h2>Performance vs Fund</h2>
                            <div class="chart-container">
                                <canvas id="myVsFundChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Investor Statements Tab -->
                <div id="investor-statements" class="tab-content">
                    <div class="statements-grid">
                        <div class="card">
                            <h2>Investment Statement</h2>
                            <div class="statement-actions">
                                <button class="btn btn-primary" onclick="app.generateStatement()">Generate PDF Statement</button>
                                <button class="btn btn-secondary" onclick="app.exportData()">Export Data</button>
                            </div>
                            <div id="investmentStatement" class="statement-content">
                                <!-- Statement content will be generated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Modals -->
        
        <!-- Investor Details Modal -->
        <div id="investorDetailsModal" class="modal">
            <div class="modal-content" style="max-width: 800px;">
                <span class="close">&times;</span>
                <h2 id="investorDetailsTitle">Investor Details</h2>
                
                <!-- Investor Summary -->
                <div class="investor-summary" style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div>
                            <strong>Investor ID:</strong>
                            <div id="detailInvestorId">-</div>
                    </div>
                        <div>
                            <strong>Name:</strong>
                            <div id="detailInvestorName">-</div>
                    </div>
                        <div>
                            <strong>Join Date:</strong>
                            <div id="detailJoinDate">-</div>
                    </div>
                        <div>
                            <strong>Total Investment:</strong>
                            <div id="detailTotalInvestment">-</div>
                    </div>
                        <div>
                            <strong>Current Value:</strong>
                            <div id="detailCurrentValue">-</div>
                        </div>
                        <div>
                            <strong>Total Return:</strong>
                            <div id="detailTotalReturn">-</div>
                </div>
            </div>
        </div>

                <!-- Transaction History -->
                <h3>Transaction History</h3>
                <div class="table-container">
                    <table id="investorTransactionsTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Amount</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="investorTransactionsBody">
                            <!-- Transactions will be populated here -->
                        </tbody>
                    </table>
                </div>
                
                <div class="form-actions" style="margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="window.closeInvestorModal()">Close</button>
                </div>
            </div>
        </div>

        <!-- Add Asset Modal -->
        <div id="addAssetModal" class="modal">
            <div class="modal-content" style="max-width: 600px;">
                <span class="close">&times;</span>
                <h2>Add New Asset</h2>
                <form id="addAssetForm">
                    <!-- Asset Search -->
                    <div class="form-group">
                        <label for="assetSearch">Search Asset</label>
                        <div class="search-container" style="position: relative;">
                            <input type="text" id="assetSearch" placeholder="Type to search (e.g., Bitcoin, Ethereum, Solana)" autocomplete="off" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                            <div id="assetDropdown" class="asset-dropdown" style="position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #ddd; border-top: none; max-height: 200px; overflow-y: auto; z-index: 1000; display: none;">
                                <!-- Search results will appear here -->
                    </div>
                    </div>
                        <input type="hidden" id="selectedAsset" name="asset" required>
                        <input type="hidden" id="selectedAssetId" name="assetId" required>
                        <input type="hidden" id="selectedAssetSymbol" name="assetSymbol" required>
                        <input type="hidden" id="selectedAssetImage" name="assetImage" required>
                        <div id="selectedAssetInfo" style="margin-top: 8px; padding: 8px; background: #f8f9fa; border-radius: 4px; display: none;">
                            <!-- Selected asset info will appear here -->
                    </div>
                    </div>

                    <!-- Quantity Input -->
                    <div class="form-group">
                        <label for="assetQuantity">Quantity Owned</label>
                        <input type="number" id="assetQuantity" name="quantity" step="0.000001" min="0" placeholder="0.00" required>
                    </div>

                    <!-- Blockchain Text Field -->
                    <div class="form-group">
                        <label for="assetChain">Blockchain</label>
                        <div class="autocomplete-container">
                            <input type="text" id="assetChain" name="chain" placeholder="Enter blockchain (e.g., Ethereum, Solana, Hyperliquid)" autocomplete="off" style="width: 100%; padding: 12px; border: 2px solid var(--border-primary); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary); font-size: 1rem;">
                            <div id="chainSuggestions" class="autocomplete-suggestions"></div>
                    </div>
                    </div>

                    <!-- Risk Level -->
                    <div class="form-group">
                        <label for="assetRisk">Risk Level</label>
                        <div class="autocomplete-container">
                            <input type="text" id="assetRisk" name="riskLevel" placeholder="Enter risk level (e.g., Low, Medium, High)" required autocomplete="off">
                            <div id="riskSuggestions" class="autocomplete-suggestions"></div>
            </div>
        </div>

                    <!-- Location -->
                    <div class="form-group">
                        <label for="assetLocation">Location</label>
                        <div class="autocomplete-container">
                            <input type="text" id="assetLocation" name="location" placeholder="Enter location (e.g., Phantom, Exchange, Cold Wallet)" required autocomplete="off">
                            <div id="locationSuggestions" class="autocomplete-suggestions"></div>
                    </div>
                    </div>

                    <!-- Coin Type -->
                    <div class="form-group">
                        <label for="assetCoinType">Coin Type</label>
                        <div class="autocomplete-container">
                            <input type="text" id="assetCoinType" name="coinType" placeholder="Enter coin type (e.g., Memecoin, Major, Altcoin)" required autocomplete="off">
                            <div id="coinTypeSuggestions" class="autocomplete-suggestions"></div>
                    </div>
                    </div>



                    <!-- Value Preview -->
                    <div class="form-group">
                        <label>Estimated Value</label>
                        <div id="valuePreview" style="padding: 15px; background: #e3f2fd; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #1976d2;">$0.00</div>
                            <div style="font-size: 0.9rem; color: #7f8c8d;">Live price will be fetched automatically</div>
                    </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="window.closeAddAssetModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Asset</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // ===================================================================
        // WAGMI INVESTMENT MANAGER - MAIN APPLICATION SCRIPT
        // ===================================================================
        // This script contains all the JavaScript functionality for the
        // crypto investment management application including:
        // - Tab navigation and UI management
        // - Google Sheets API integration  
        // - Portfolio data processing and display
        // - Asset management (add/edit/delete)
        // - Chart generation and visualization
        // - Autocomplete and form handling
        // ===================================================================
        
        console.log('🚀 WAGMI Investment Manager - Initializing...');
        
        // ========================================
        // CONFIGURATION CONSTANTS
        // ========================================
        
        /**
         * Application Configuration
         * Centralized configuration for URLs, endpoints, and settings
         */
        const CONFIG = {
            // Google Apps Script URLs
            GOOGLE_APPS_SCRIPT_URL: 'https://script.google.com/macros/s/AKfycbyR5aSLuZhoFL0X-igNyVdifZDzbdi29EhGzcpFRLBaZe3bDgK1QVOiWCZO3hfRSFla/exec',
            
            // API Endpoints
            API_ENDPOINTS: {
                ADD_ASSET: 'add',
                UPDATE_ASSET: 'update',
                DELETE_ASSET: 'delete',
                GET_LAST_UPDATE: 'getLastPriceUpdate',
                REFRESH_PRICES: 'testPriceRefresh',
                SETUP_AUTOMATION: 'setupAutomation',
                CHECK_TRIGGERS: 'checkTriggers'
            },
            
            // Update Intervals (in milliseconds)
            TIMESTAMP_UPDATE_INTERVAL: 60 * 1000, // 1 minute
            PRICE_REFRESH_INTERVAL: 30 * 60 * 1000, // 30 minutes
            
            // UI Settings
            REFRESH_BUTTON_DELAY: 2000, // 2 seconds
            SUCCESS_MESSAGE_DURATION: 3000 // 3 seconds
        };
        
        // Simple navigation function
        window.enterManagerView = function() {
            console.log('🔧 Entering Manager View (inline)...');
            
            const loginScreen = document.getElementById('loginScreen');
            const managerView = document.getElementById('managerView');
            
            if (loginScreen && managerView) {
                loginScreen.style.display = 'none';
                managerView.style.display = 'block';
                
                // Initialize dashboard tab and load data
                setTimeout(() => {
                    window.switchTab('dashboard');
                    console.log('✅ Manager view loaded with dashboard data');
                }, 100);
                
                console.log('✅ Successfully switched to manager view');
            } else {
                console.error('❌ Could not find required elements');
                alert('Error: Could not find required elements');
            }
        };
        
        // Make it available globally for button clicks
        window.app = {
            enterManagerView: window.enterManagerView
        };
        
        // ===================================================================
        // TAB NAVIGATION & UI MANAGEMENT
        // ===================================================================
        
        // Tab navigation function
        window.switchTab = function(tabName) {
            console.log('🔄 Switching to tab:', tabName);
            
            // Save current tab state to localStorage
            localStorage.setItem('wagmi_current_tab', tabName);
            localStorage.setItem('wagmi_manager_view_active', 'true');
            
            // Update tab content
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));
            const targetTab = document.getElementById(tabName);
            if (targetTab) targetTab.classList.add('active');
            
            // Update KPI ribbon navigation active state
            const navLinks = document.querySelectorAll('.kpi-ribbon .nav-link');
            navLinks.forEach(link => {
                const linkTab = link.getAttribute('data-tab');
                if (linkTab === tabName) {
                    // Set active state - vibrant green color
                    link.style.color = '#00ff88';
                    link.style.fontWeight = '600';
                    link.classList.add('active');
                } else {
                    // Set inactive state - white color
                    link.style.color = '#e2e8f0';
                    link.style.fontWeight = '400';
                    link.classList.remove('active');
                }
            });
            
            // Load basic data for the tab
            if (tabName === 'dashboard') {
                window.loadDashboardData();
            } else if (tabName === 'investors') {
                window.loadInvestorsData();
            } else if (tabName === 'portfolio') {
                window.loadPortfolioData();
            } else if (tabName === 'performance') {
                window.loadPerformanceData();
            }
        };
        
        // Function to restore app state on page refresh
        window.restoreAppState = function() {
            console.log('🔄 Restoring app state...');
            
            // Check if manager view was active
            const managerViewActive = localStorage.getItem('wagmi_manager_view_active');
            const currentTab = localStorage.getItem('wagmi_current_tab');
            
            if (managerViewActive === 'true') {
                console.log('📱 Restoring manager view...');
                
                // Hide login screen and show manager view
                const loginScreen = document.getElementById('loginScreen');
                const managerView = document.getElementById('managerView');
                
                if (loginScreen && managerView) {
                    loginScreen.style.display = 'none';
                    managerView.style.display = 'block';
                    console.log('✅ Manager view restored');
                    
                    // Restore the specific tab if one was saved
                    if (currentTab && ['dashboard', 'investors', 'portfolio', 'performance'].includes(currentTab)) {
                        console.log(`📊 Restoring tab: ${currentTab}`);
                        setTimeout(() => {
                            window.switchTab(currentTab);
                        }, 100); // Small delay to ensure DOM is ready
                    } else {
                        // Default to dashboard if no valid tab saved
                        console.log('📊 No valid tab saved, defaulting to dashboard');
                        setTimeout(() => {
                            window.switchTab('dashboard');
                        }, 100);
                    }
                }
            } else {
                console.log('🏠 No manager view state to restore, staying on login screen');
            }
        };
        
        // ===================================================================
        // GOOGLE SHEETS API INTEGRATION
        // ===================================================================
        
        // Google Sheets configuration
        const SPREADSHEET_ID = '1h04nkcnQmxaFml8RubIGmPgffMiyoEIg350ryjXK0tM';
        const API_KEY = 'AIzaSyAWXECv5w1HjPmWcTnEqifMifJk-kKeEDA';
        
        // Function to fetch live data from Google Sheets
        window.fetchLiveInvestorData = async function() {
            try {
                console.log('📊 Fetching live investor data from Google Sheets...');
                const url = `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/Investors!A:H?key=${API_KEY}`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.values && data.values.length > 1) {
                    console.log('✅ Successfully fetched live investor data');
                    console.log('📊 Raw data from Google Sheets:', data.values);
                    return data.values.slice(1); // Skip header row
                } else {
                    console.error('❌ No investor data found');
                    return null;
                }
            } catch (error) {
                console.error('❌ Error fetching investor data:', error);
                return null;
            }
        };
        
        // Function to fetch live transactions data
        window.fetchLiveTransactionData = async function() {
            try {
                console.log('💰 Fetching live transaction data from Google Sheets...');
                const url = `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/Transactions!A:F?key=${API_KEY}`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.values && data.values.length > 1) {
                    console.log('✅ Successfully fetched live transaction data');
                    return data.values.slice(1); // Skip header row
                } else {
                    console.error('❌ No transaction data found');
                    return null;
                }
            } catch (error) {
                console.error('❌ Error fetching transaction data:', error);
                return null;
            }
        };
        
        // Function to fetch KPI data from Google Sheets
        window.fetchKPIData = async function() {
            try {
                console.log('📊 Fetching KPI data from Google Sheets...');
                const url = `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/KPIs!A:B?key=${API_KEY}`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.values && data.values.length > 1) {
                    console.log('✅ Successfully fetched KPI data');
                    return data.values.slice(1); // Skip header row
                } else {
                    console.error('❌ No KPI data found');
                    return null;
                }
            } catch (error) {
                console.error('❌ Error fetching KPI data:', error);
                return null;
            }
        };

        // Function to fetch last update timestamp from Google Sheets
        window.fetchLastUpdateTimestamp = async function() {
            try {
                console.log('🕒 Fetching last update timestamp from Google Sheets...');
                const url = `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/Last Update!A2?key=${API_KEY}`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.values && data.values.length > 0 && data.values[0].length > 0) {
                    const timestamp = data.values[0][0];
                    console.log('✅ Successfully fetched last update timestamp:', timestamp);
                    return timestamp;
                } else {
                    console.error('❌ No last update timestamp found');
                    return null;
                }
            } catch (error) {
                console.error('❌ Error fetching last update timestamp:', error);
                return null;
            }
        };
        
        // Function to update KPI ribbon with formatted data
        window.updateKPIRibbon = async function(kpiData) {
            if (!kpiData || kpiData.length === 0) {
                console.log('⚠️ No KPI data to display');
                return;
            }
            
            console.log('📊 Updating KPI ribbon with data:', kpiData);
            
            // Create a map of KPI data for easy lookup
            const kpiMap = {};
            kpiData.forEach(row => {
                if (row[0] && row[1]) {
                    kpiMap[row[0].toLowerCase().trim()] = row[1];
                }
            });
            
            // Update each KPI with proper formatting
            const totalInvestors = parseInt(kpiMap['total investors']) || 0;
            const totalInvested = parseFloat(kpiMap['total invested']) || 0;
            const totalAUM = parseFloat(kpiMap['total aum']) || 0;
            const cumulativeReturn = parseFloat(kpiMap['cumulative retur']) || 0; // Note: typo in sheet
            const monthlyReturn = parseFloat(kpiMap['monthly return']) || 0;
            
            // Format and update Active Investors
            document.getElementById('kpiActiveInvestors').textContent = totalInvestors.toString();
            
            // Format and update Total AUM (using AUM instead of invested for display)
            document.getElementById('kpiTotalAUM').textContent = formatCurrency(totalAUM);
            
            // Format and update Cumulative Return
            const cumulativeElement = document.getElementById('kpiCumulativeReturn');
            cumulativeElement.textContent = formatPercentage(cumulativeReturn);
            cumulativeElement.style.color = cumulativeReturn >= 0 ? '#00ff88' : '#ff4757';
            
            // Format and update Monthly Return
            const monthlyElement = document.getElementById('kpiMonthlyReturn');
            monthlyElement.textContent = formatPercentage(monthlyReturn);
            monthlyElement.style.color = monthlyReturn >= 0 ? '#00ff88' : '#ff4757';
            
            // Fetch and update last updated time from database
            try {
                const dbTimestamp = await window.fetchLastUpdateTimestamp();
                if (dbTimestamp) {
                    // Parse the ISO timestamp and format it for display
                    const dbDate = new Date(dbTimestamp);
                    const compactTimeString = window.formatCompactTimestamp(dbDate);
                    document.getElementById('kpiLastUpdated').textContent = compactTimeString;
                    console.log('✅ Updated last updated time from database:', compactTimeString);
                } else {
                    // Show error when database timestamp is not available
                    document.getElementById('kpiLastUpdated').textContent = '#ERROR';
                    console.error('❌ Database timestamp not available');                }
            } catch (error) {
                console.error('❌ Error fetching database timestamp:', error);
                // Show error instead of fallback
                document.getElementById('kpiLastUpdated').textContent = '#ERROR';